

### 第7章　オブジェクト指向構文-基本

1. クラスの定義
* Javaアプリの基本はクラスです。クラスとはアプリの中で特定の機能を担う意味を持ったかたまりであり、Javaアプリとは、これらのクラスの集合と言っても良い。  
* クラス名  
クラス名でを命名するうえでの留意点は以下のとおり。  
* Pascal記法で統一  
→すべての単語の頭文字を大文字で表す記法のこと。例えば、LocakDateTime、InputStream、FileReaderのように命名する。  
* 目的に応じて接頭辞/接尾辞をつける  
→構文規則ではないが、慣例的な命名に従うことで、より大きなくくりの中でのクラスの位置づけが明確になる。  
* 扱う対象/機能を端的に表す単語を選ぶ。  
→名前は英単語で、かつ、フルスペルで表記する。  
→下位クラスはより具体的にする。  
→連番、コードなどの接頭辞は極力避ける。  
* 修飾子  
クラスやそのメンバーの性質を決めるキーワードのこと。例えば、publicは「クラス/メンバーがどこからでもアクセスできる」ことを意味する修飾子。P276 表7.2参照  
* メンバーの記述順  
→class{...}には、フィールド/メソッドといった要素(メンバー)を任意の順序で記述する。ただし、コードの可読性を維持するためには、同じ要素はまとめ、順序も統一しておくこと。  
2. フィールド
class{...}の直下で定義された変数。メンバー変数とも呼ばれ、クラスで管理すべき情報を表す。  
* 修飾子  
→P280 表7.3参照 アクセス修飾子(public、protected等)を省略した場合、同じパッケージのクラスからのみアクセスが可能となる。  
* 規定値  
→P280 表7.4参照 フィールドの規定値がその型の規定値そのままである場合には、値を初期化しなくてもよい。  
3. メソッド  
クラスの動作/処理、振る舞いを表すための要素。主にクラスで管理されているデータ(フィールド)の値を操作するための役割を担う。  
* メソッド名  
→識別子のルールはこれまでと同様で、show、toString、lastIndexOfのようなcamelCase形式で表す。  
* 実引数と仮引数  
→引数とは、メソッドの中で参照可能な変数のこと。メソッドを呼び出す際に、呼び出し側からメソッドに値を引き渡す際に利用する。より細かく、呼び出し元から渡される値のことを実引数、受け取り側の変数のことを仮引数という。  
* 引数の並び順について以下のことに留意する。  
→重要なものから順番に記述する。  
→順序に一貫性を持たせる。  
→関連する引数は近接させる。  
* 戻り値  
→メソッドが処理した結果を表す。戻り値はreturn命令によって表す。  
* 修飾子  
→P285 表7.6参照 アクセス修飾子を省略した場合には、フィールドの場合と同じく、パッケージプライベートの扱いとなる。  
* thisキーワード  
→メソッドなどの配下で暗黙的に利用できる特別な変数で、現在のオブジェクトを表す。  
* メソッドのオーバーロード  
同じクラスに同名のフィールドが存在することは許されないが、同じ名前のメソッドは「引数の個数」「引数のデータ型」が異なっている場合に限って許容される。そして、名前は同じで、引数の型/並びだけが異なるメソッドを複数することをメッソドのオーバーロードという。  
* オーバーロードの注意点  
→現実的な利用においては、引数の個数が同じ(型だけが異なる)オーバーロードは避けること。
4. 変数のスコープ  
スコープとは、コードの中での変数の有効範囲のこと。変数がどこから参照できるか決める概念。  
* スコープの種類  
→変数のスコープは、変数を宣言した場所によって決定する。最も有効範囲が広いのが、クラス全体からアクセスできるフィールドでclass{...}直下で宣言する。  
一方、メソッドの定義ブロックで宣言された変数はローカル変数と呼ばれ、メソッドの中でしかアクセスできない。最も有効範囲の狭い変数は、メソッド配下のブロックで宣言された変数である。ブロック変数という。  
* ブロックスコープ  
→ローカルスコープよりもさらに小さなスコープの単位がブロックスコープという。if,while/for,try等の制御ブロックで宣言された変数は、そのブロック配下でしかアクセスできない。
5. コンストラクター  
ほとんどのクラスは、利用するもあたってnew演算子で「インスタンス化」する必要がある。このインスタンス化のタイミングで呼び出される特別なメソッドがコンストラクターという。  
* デフォルトコンストラクター  
→これまでのコードはコンストラクターを意識することはありませんでした。それは、コンストラクター定義を省略した場合、Javaが引数のない、空のコンストラクターを暗黙的に生成していたからです。このようなコンストラクターをデフォルトコンストラクターという。  
* コンストラクターのオーバーロード  
→メソッとド同じく、コンストラクターもまた複数のシグニチャを持てる。これをコンストラクターのオーバーロードという。  
* 初期化ブロック  
→class{...}直下に書かれた名無しのブロック({...})は、インスタンス化のタイミングでコンストラクターよりも先に実行される。このような名無しの
ブロックを初期化ブロックという。  
* ファクトリーメソッド  
→コンストラクターとは別に、インスタンスを作成するためのクラスメソッドを用意することができます。このようなインスタンス生成を目的としたメソッドをファクトリーメソッドという。  
利点は「自由に命名できる」、「インスタンスを常に生成しなくてもよい」、「戻り値の型を抽象型/インターフェイス型にもできる」  
6. クラスメソッド/クラスフィールド  
クラスから直接によびだせる(インスタンスを生成しなくてもよい)フィールド/メソッドのこと。静的メソッド/静的フィールド、staticメソッド/staticフィールドと呼ぶ場合もある。  
* クラスメソッド  
→クラスメソッドを定義するには、これまでのメソッド定義にstatic修飾子を付与するだけ。注意点は以下のとおり。  
→クラスメソッドでは変数thisは使えない。  
→クラスメソッドはオブジェクト経由では呼び出さない。  
* クラスフィールド  
インスタンスを経由せずに、クラスから直接によびだせるフィールドがクラスフィールドです。クラスメソッドと同く、フィールドに対してstatic修飾子を付与するだけで定義できる。  
* クラス定義  
→class{...}の直下で定義された定義、読み取り専用のフィールドのこと。クラス定義を表すには、final修飾子を付与するだけ。  
* static初期化ブロック  
→初期化ブロックのstatic版。初期化ブロックがインスタンスを生成する際に実行されるのに対して、static初期化ブロックはクラスが初期化される際に実行される。staticイニシャライザーとも呼ばれる。  
* 初期化処理の実行順序  
→P313 図7.7 参照  
7. 引数/戻り値の様々な記法  
* 可変長引数のメソッド  
引数があらかじめ決まっていない(実行時に引数の個数が変化しうる)メソッドです。注意点は以下のとおり。  
→可変長引数はメソッドに１つ、引数リストの末尾にだけ指定できる。  
→想定される引数まで可変長引数にまとめない。  
→引数そのものの省略を認めている。  
* 引数とデータ型  
→Javaの型は、基本型と参照型に大別でき、双方には違いがある。引数においても、基本型/参照型いずれかによって、受け渡しした値への影響範囲が変化するので要注意。  
* null安全の対策　-optionalクラス-  
→Optionalクラス(java.utilパッケージ)とは、nullチェックを簡単化し、NUllPointerExceptionを防ぐ--null安全のためのクラスである。  
optionalクラスのメソッドはP322 表7.8参照  
8. パッケージ  
上位の概念として、名前を分類するための仕組みがパッケージ P324 図7.10参照  
* パッケージの基本  
package命名を使用する。package命令は、ファイルの先頭に一度だけしか記述できない。命名ルールは以下。  
→名前の階層構造はドット(.)で表す。  
→パッケージ名はすべて小文字で。  
→ドメイン名をもとに命名。  
* パッケージとフォルダ階層の関係  
→javaでは、パッケージ階層とファイルシステムの階層とは対応関係になければならない。P327 図7.11参照。  
* デフォルトパッケージ  
→package宣言を省略した場合、配下のクラス/インターフェイスは、デフォルトパッケージ(名前なしパッケージ)に属するとみなされる。  
* 名前の解決  
import命令を利用することで完全修飾名は単純名で表記できるようになる。  
* 単一インポート  
→「java.util.List」のように特定の型を決め打ちでインポート
* オンデマンドインポート  
→「java.util.*」のようにパッケージ配下のすべての型をインポート  
* staticインポート  
→import static命令を利用することで、(パッケージだけではなく)クラス/構造体、列挙体などの型を略記できるようになる。
